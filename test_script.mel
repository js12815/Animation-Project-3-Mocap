/* Array to contain all the mocap markers */
string $markers[] = {"LFHD", "RFHD", "LBHD", "RBHD", "C7", "T10", "CLAV", "STRN", "RBAC", "LSHO", "LUPA", "LELB", 
"LFRM", "LWRA", "LWRB", "LFIN", "RSHO", "RUPA", "RELB", "RFRM", "RWRA", "RWRB", "RFIN", 
"LFWT", "RFWT", "LBWT", "RBWT", "LTHI", "LKNE", "LSHN", "LANK", "LHEE", "LTOE", "LMT5", 
"RTHI", "RKNE", "RSHN", "RANK", "RHEE", "RTOE", "RMT5"};

//string $markers[] = `ls -type "transform" -long`;
//print (size($markers));

/* Test function: createCubes loops through all the mocap markers and creates a cube 
   at the position of each marker */
proc createCubes(string $markers[]) {
    for( $i = 0; $i < size($markers); $i++) {
        
        //Get x, y, and z positions for each marker.
        string $currentMarker = $markers[$i];
        $x = `getAttr ($currentMarker + ".translateX")`;
        $y = `getAttr ($currentMarker + ".translateY")`;
        $z = `getAttr ($currentMarker + ".translateZ")`;
        
        //Create a cube and move it to that position
        polyCube -w 5.0 -h 5.0 -d 5.0;
        move -a $x $y $z;
    }
}

/* Test function to call createCubes on each frame. */
proc createCubesEveryFrame(string $markers[], int $endFrame){
    
    for( $i = 1; $i <= $endFrame; $i++) {
        currentTime $i;
        createCubes($markers);
    }    
}

/* Test function to create a polygon with vertices at the mocap marker
   positions for a single frame. */
proc createPoly(string $markers[]) {
    
    string $buildCommand = "";
    for( $i = 1; $i <= size($markers); $i++) {
        //Get x, y, and z positions for each marker.
        string $currentMarker = $markers[$i];
        $x = `getAttr ($currentMarker + ".translateX")`;
        $y = `getAttr ($currentMarker + ".translateY")`;
        $z = `getAttr ($currentMarker + ".translateZ")`;
        
        $buildCommand = $buildCommand + "-p" + $x + $y + $z;
    }
    //Currently doesn't work, trying to figure out why
    //polyCreateFacet $buildCommand;
}

/* Uncomment one of these tests to see shit happen
   Be warned that createCubesEveryFrame is kind of slow on my computer.
   Dunno how it'll be like on your computer but my comp has a pretty good graphics card*/
//createCubes($markers);
//createCubesEveryFrame($markers, 335);
//createPoly($markers);